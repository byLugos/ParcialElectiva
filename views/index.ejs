<!DOCTYPE html>
<html lang="es">
    <%- include('./templates/header.ejs') %>
    <body>
        <div class="container mt-5">
            <h1 class="mb-4">Registro de Empresas</h1>
            <h4>Registro de empresas para la DIAN, deberá llenar la información y la verá reflejada
                en la tabla de abajo
            </h4>
            <br>
            <form id="companyForm">
                <div class="mb-3">
                    <label for="nombre" class="form-label">Nombre de la Empresa</label>
                    <input type="text" class="form-control" id="nombre" placeholder="Ingrese el nombre" required>
                </div>
                <div class="mb-3">
                    <label for="sector" class="form-label">Sector</label>
                    <input type="text" class="form-control" id="sector" placeholder="Ingrese el sector" required>
                </div>
                <div class="mb-3">
                    <label for="identificacion" class="form-label">Identificación</label>
                    <input type="text" class="form-control" id="identificacion" placeholder="Ingrese la identificación" required>
                </div>
                <div class="mb-3">
                    <label for="department" class="form-label">Departamento</label>
                    <select class="form-select" id="department" required>
                        <option value="" selected>Seleccione un departamento</option>
                        <% departaments.forEach(department => { %>
                            <option value="<%= department.code %>"><%= department.name %></option>
                        <% }); %>
                    </select>
                </div>
                <div class="mb-3">
                    <label for="town" class="form-label">Municipio</label>
                    <select class="form-select" id="town" required>
                        <option value="" selected>Seleccione un municipio</option>
                    </select>
                </div>
                <button type="submit" class="btn btn-primary">Registrar Empresa</button>
            </form>

            <h2 class="mt-5">Lista de Empresas Registradas</h2>
            <% if (companies.length > 0) { %>
                <table class="table table-striped mt-3">
                    <thead>
                        <tr>
                            <th>Nombre</th>
                            <th>Sector</th>
                            <th>Identificación</th>
                            <th>Departamento</th>
                            <th>Municipio</th>
                        </tr>
                    </thead>
                    <tbody>
                        <% companies.forEach(comp => { %>
                            <tr>
                                <td><%= comp.nombre %></td>
                                <td><%= comp.sector %></td>
                                <td><%= comp.identificacion %></td>
                                <td><%= comp.departamento %></td>
                                <td><%= comp.municipio %></td>
                            </tr>
                        <% }) %>
                    </tbody>
                </table>
            <% } else { %>
                <p class="text-danger">No hay empresas actualmente.</p>
            <% } %>
        </div>
        <script src="../scripts/script.js"></script>
        <%- include('./templates/footer.ejs') %>

    </body>
</html>
